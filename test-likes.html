<!DOCTYPE html>
<html>
<head>
    <title>Test Likes Functionality</title>
    <script type="module">
        import { createClient } from 'https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm'
        
        const supabase = createClient(
            'https://wxvcmvacajexdtcbgdva.supabase.co',
            'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4dmNtdmFjYWpleGR0Y2JnZHZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkyMjMzMzYsImV4cCI6MjA2NDc5OTMzNn0.rKIixUac8fxLrHGzlXDEMz2xGcfgpX_QY6ZjhlVpWmQ'
        )
        
        async function testLikes() {
            console.log('üß™ Testing likes functionality...')
            
            // Check if user is logged in
            const { data: { user } } = await supabase.auth.getUser()
            console.log('üë§ Current user:', user)
            
            if (!user) {
                console.log('‚ùå No user logged in. Please login first.')
                document.getElementById('result').innerHTML = '‚ùå Please login to test likes'
                return
            }
            
            // Test fetching likes from a post
            const testPostId = 'YOUR_POST_ID_HERE' // Replace with an actual post ID
            
            try {
                // Check if likes table exists
                const { data: likes, error: likesError } = await supabase
                    .from('likes')
                    .select('*')
                    .limit(1)
                
                if (likesError) {
                    console.error('‚ùå Likes table error:', likesError)
                    document.getElementById('result').innerHTML = `‚ùå Likes table error: ${likesError.message}`
                    return
                }
                
                console.log('‚úÖ Likes table exists!')
                document.getElementById('result').innerHTML = '‚úÖ Likes table exists and is accessible!'
                
                // Try to count likes
                const { count, error: countError } = await supabase
                    .from('likes')
                    .select('*', { count: 'exact', head: true })
                
                console.log('üìä Total likes in database:', count)
                document.getElementById('result').innerHTML += `<br>üìä Total likes in database: ${count}`
                
            } catch (error) {
                console.error('‚ùå Error:', error)
                document.getElementById('result').innerHTML = `‚ùå Error: ${error.message}`
            }
        }
        
        window.onload = () => {
            document.getElementById('testBtn').onclick = testLikes
        }
    </script>
</head>
<body>
    <h1>Test Likes Functionality</h1>
    <button id="testBtn">Test Likes Database</button>
    <div id="result" style="margin-top: 20px; padding: 20px; background: #f0f0f0;"></div>
</body>
</html>