(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{345:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(5155),i=s(2115),r=s(1934);let l=(0,s(4982).UU)("https://wxvcmvacajexdtcbgdva.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Ind4dmNtdmFjYWpleGR0Y2JnZHZhIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDkyMjMzMzYsImV4cCI6MjA2NDc5OTMzNn0.rKIixUac8fxLrHGzlXDEMz2xGcfgpX_QY6ZjhlVpWmQ"),n={eat:(0,a.jsx)("svg",{className:"w-4 h-4 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),sleep:(0,a.jsx)("svg",{className:"w-4 h-4 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),study:(0,a.jsx)("svg",{className:"w-4 h-4 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),play:(0,a.jsx)("svg",{className:"w-4 h-4 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-4-6h4a2 2 0 012 2v4a2 2 0 01-2 2H9a2 2 0 01-2-2v-4a2 2 0 012-2z"})}),life:(0,a.jsx)("svg",{className:"w-4 h-4 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})};function o(){let{onCategoryClick:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},[t,s]=(0,i.useState)([]),[o,c]=(0,i.useState)(!0);(0,i.useEffect)(()=>{console.log("RecentActivity component mounted"),d();let e=x(),t=setInterval(()=>{d()},3e4);return()=>{clearInterval(t),e()}},[]);let d=async()=>{try{0===t.length&&c(!0);let{data:e,error:a}=await l.from("posts").select("id, title, content, category, created_at, hashtags").eq("is_draft",!1).order("created_at",{ascending:!1}).limit(5);if(a)throw console.error("Supabase error:",a),a;JSON.stringify(e)!==JSON.stringify(t)&&s(e||[])}catch(e){console.error("Error fetching recent posts:",e),0===t.length&&s([])}finally{c(!1)}},x=()=>{let e=l.channel("recent_posts_updates").on("postgres_changes",{event:"INSERT",schema:"public",table:"posts"},e=>{console.log("New post created:",e),d()}).on("postgres_changes",{event:"UPDATE",schema:"public",table:"posts"},e=>{console.log("Post updated:",e),d()}).subscribe();return()=>{l.removeChannel(e)}},m=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4),i=Math.floor(s/36e5),r=Math.floor(s/864e5);return a<1?"just now":a<60?"".concat(a,"m"):i<24?"".concat(i,"h"):"".concat(r,"d")},h=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:50;return e.length<=t?e:e.substring(0,t)+"..."};return(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"text-xs text-gray-500",children:"Recent Activity"}),(0,a.jsx)("button",{onClick:()=>{console.log("Refresh button clicked"),d()},disabled:o,className:"px-2 py-1 text-xs text-blue-500 hover:text-blue-700 hover:bg-blue-50 rounded transition-all disabled:opacity-50 disabled:cursor-not-allowed font-medium",children:o?(0,a.jsx)("span",{className:"inline-block animate-spin",children:"⟳"}):"Refresh"})]}),(0,a.jsx)("div",{className:"",children:o?(0,a.jsx)("div",{className:"space-y-2",children:[void 0,void 0,void 0].map((e,t)=>(0,a.jsx)("div",{className:"h-16 bg-gray-100 rounded-xl animate-pulse"},t))}):t.length>0?(0,a.jsx)(r.P.div,{className:"space-y-2",children:t.map((t,s)=>(0,a.jsxs)(r.P.div,{initial:!1,animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:"flex items-center gap-3 p-3 bg-white border border-gray-200 rounded-xl cursor-pointer hover:bg-gray-50 transition-all group",onClick:()=>null==e?void 0:e(t.category),whileHover:{scale:1.02},whileTap:{scale:.98},children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-10 h-10 bg-gray-100 rounded-full group-hover:bg-gray-200 transition-colors",children:n[t.category]}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-sm leading-relaxed text-gray-900",children:[(0,a.jsx)("span",{className:"font-semibold",children:t.title}),t.title&&t.content&&" \xb7 ",(0,a.jsx)("span",{className:"text-gray-600",children:h(t.content)})]}),t.hashtags&&t.hashtags.length>0&&(0,a.jsx)("div",{className:"mt-1 flex gap-2",children:t.hashtags.slice(0,3).map((e,t)=>(0,a.jsxs)("span",{className:"text-xs text-blue-500 hover:text-blue-600 transition-colors",children:["#",e]},t))})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:m(t.created_at)})]},t.id))}):(0,a.jsx)("p",{className:"text-center text-sm text-gray-500 bg-gray-50 p-4 rounded-xl",children:"No recent activity yet. Create your first post!"})})]})}function c(e){let{user:t,onClose:s,onUpdate:r}=e,[n,o]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),[x,m]=(0,i.useState)(null),[h,u]=(0,i.useState)(""),[p,g]=(0,i.useState)("");async function f(){try{o(!0);let{data:e,error:s}=await l.from("profiles").select("*").eq("id",t.id).single();if(s)throw s;e&&(m(e),u(e.username||""),g(e.avatar_url||""))}catch(e){console.error("Error loading user data:",e)}finally{o(!1)}}async function y(e){try{if(d(!0),!e.target.files||0===e.target.files.length)throw Error("You must select an image to upload.");let s=e.target.files[0],a=s.name.split(".").pop(),i="".concat(Math.random(),".").concat(a),r="".concat(t.id,"/").concat(i);console.log("Uploading to path:",r),console.log("File details:",{name:s.name,size:s.size,type:s.type});let{error:n}=await l.storage.from("avatars").upload(r,s);if(n)throw console.error("Upload error details:",n),n;let{data:o}=l.storage.from("avatars").getPublicUrl(r);g(o.publicUrl)}catch(e){console.error("Avatar upload error:",e),alert("Error uploading avatar: ".concat(e.message||e.toString()))}finally{d(!1)}}async function b(){try{o(!0);let e={id:t.id,username:h,avatar_url:p,created_at:new Date().toISOString()},{data:a,error:i}=await l.from("profiles").upsert(e).select().single();if(i)throw console.error("Profile update error:",i),i;a&&r&&r(a),alert("Profile updated successfully!"),s()}catch(e){console.error("Error updating profile:",e),alert("Error updating profile: ".concat(e.message||"Unknown error"))}finally{o(!1)}}return(0,i.useEffect)(()=>{f()},[t]),(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 max-w-md w-full shadow-xl",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold mb-6 text-gray-800",children:"Edit Profile"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"flex flex-col items-center",children:[(0,a.jsxs)("div",{className:"relative",children:[p?(0,a.jsx)("img",{src:p,alt:"Avatar",className:"w-24 h-24 rounded-full object-cover border-4 border-pink-200"}):(0,a.jsx)("div",{className:"w-24 h-24 rounded-full bg-gray-200 flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-gray-400",children:"No image"})}),(0,a.jsx)("label",{htmlFor:"avatar",className:"absolute bottom-0 right-0 bg-pink-400 rounded-full p-2 cursor-pointer hover:bg-pink-500 transition-colors",children:(0,a.jsxs)("svg",{className:"w-4 h-4 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}),(0,a.jsx)("input",{type:"file",id:"avatar",accept:"image/*",onChange:y,disabled:c,className:"hidden"})]}),c&&(0,a.jsx)("p",{className:"text-sm text-gray-500 mt-2",children:"Uploading..."})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-1",children:"Username"}),(0,a.jsx)("input",{id:"username",type:"text",value:h,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-pink-300",placeholder:"Enter your username"})]}),(0,a.jsxs)("div",{className:"flex gap-3 mt-6",children:[(0,a.jsx)("button",{onClick:s,className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",disabled:n,children:"Cancel"}),(0,a.jsx)("button",{onClick:b,className:"flex-1 px-4 py-2 bg-pink-400 text-white rounded-lg hover:bg-pink-500 transition-colors disabled:opacity-50",disabled:n||c,children:n?"Saving...":"Save"})]})]})]})})}function d(){let[e,t]=(0,i.useState)(null),[s,r]=(0,i.useState)(""),[n,o]=(0,i.useState)(""),[d,x]=(0,i.useState)(!1),[m,h]=(0,i.useState)(!1);(0,i.useEffect)(()=>{l.auth.getSession().then(e=>{var s;let{data:{session:a}}=e;t(null!=(s=null==a?void 0:a.user)?s:null)});let{data:{subscription:e}}=l.auth.onAuthStateChange((e,s)=>{var a;t(null!=(a=null==s?void 0:s.user)?a:null)});return()=>e.unsubscribe()},[]);let u=async()=>{x(!0);let{error:e}=await l.auth.signUp({email:s,password:n});e?alert(e.message):alert("Check your email for confirmation!"),x(!1)},p=async()=>{x(!0);let{error:e}=await l.auth.signInWithPassword({email:s,password:n});e&&alert(e.message),x(!1)},g=async()=>{await l.auth.signOut()},[f,y]=(0,i.useState)(!1);return e?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute top-2 right-2 sm:top-4 sm:right-4 z-50",children:(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row items-end sm:items-center gap-2 sm:gap-3 bg-white/95 backdrop-blur p-2 sm:px-4 sm:py-2 rounded-2xl sm:rounded-full border border-gray-200 shadow-sm",children:[(0,a.jsx)("span",{className:"text-xs sm:text-sm text-gray-700 px-2 sm:px-0 truncate max-w-[150px] sm:max-w-none",children:e.email}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("button",{onClick:()=>h(!0),className:"px-3 py-1 sm:px-4 sm:py-1.5 bg-pink-400 text-white rounded-full text-xs sm:text-sm hover:bg-pink-500 transition-colors",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Edit Profile"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Edit"})]}),(0,a.jsxs)("button",{onClick:g,className:"px-3 py-1 sm:px-4 sm:py-1.5 bg-gray-900 text-white rounded-full text-xs sm:text-sm hover:bg-gray-800 transition-colors",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Sign Out"}),(0,a.jsx)("span",{className:"sm:hidden",children:"Out"})]})]})]})}),m&&(0,a.jsx)(c,{user:e,onClose:()=>h(!1),onUpdate:()=>{}})]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"absolute top-2 right-2 sm:top-4 sm:right-4 z-50",children:(0,a.jsxs)("button",{onClick:()=>y(!f),className:"px-4 py-1.5 sm:px-5 sm:py-2 bg-gray-900 text-white rounded-full text-xs sm:text-sm hover:bg-gray-800 transition-colors flex items-center gap-1 sm:gap-2 shadow-sm",children:[(0,a.jsx)("svg",{className:"w-3 h-3 sm:w-4 sm:h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 16l-4-4m0 0l4-4m-4 4h14m-5 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h7a3 3 0 013 3v1"})}),"Login"]})}),f&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm flex items-center justify-center z-50",onClick:()=>y(!1),children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl p-8 max-w-sm w-full mx-4 shadow-2xl",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-gray-900 tracking-tight",children:"Sign in to your account"}),(0,a.jsx)("button",{onClick:()=>y(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"email",placeholder:"Email address",value:s,onChange:e=>r(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all"}),(0,a.jsx)("input",{type:"password",placeholder:"Password",value:n,onChange:e=>o(e.target.value),className:"w-full px-4 py-3 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-gray-900 focus:border-transparent transition-all"}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:p,disabled:d,className:"flex-1 px-4 py-3 bg-gray-900 text-white rounded-lg text-sm font-medium hover:bg-gray-800 disabled:opacity-50 transition-colors",children:d?"Loading...":"Sign In"}),(0,a.jsx)("button",{onClick:u,disabled:d,className:"flex-1 px-4 py-3 bg-white text-gray-900 border border-gray-300 rounded-lg text-sm font-medium hover:bg-gray-50 disabled:opacity-50 transition-colors",children:d?"Loading...":"Sign Up"})]})]})]})})]})}var x=s(2177),m=s(9509);let h={clear:"☀️",clouds:"☁️",rain:"\uD83C\uDF27️",drizzle:"\uD83C\uDF26️",thunderstorm:"⛈️",snow:"❄️",mist:"\uD83C\uDF2B️",fog:"\uD83C\uDF2B️",haze:"\uD83C\uDF2B️"};function u(e){let{onWeatherUpdate:t}=e,[s,r]=(0,i.useState)(null),[l,n]=(0,i.useState)(!1),[o,c]=(0,i.useState)(!1),d=async()=>{n(!0);try{let{latitude:e,longitude:s}=(await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t)})).coords,a=m.env.NEXT_PUBLIC_OPENWEATHER_API_KEY||"demo",i=await fetch("https://api.openweathermap.org/data/2.5/weather?lat=".concat(e,"&lon=").concat(s,"&appid=").concat(a,"&units=metric"));if(!i.ok){let e={temp:18,condition:"clear",icon:"☀️",location:"Toronto"};r(e),t(e);return}let l=await i.json(),n={temp:Math.round(l.main.temp),condition:l.weather[0].main.toLowerCase(),icon:h[l.weather[0].main.toLowerCase()]||"\uD83C\uDF24️",location:l.name};r(n),t(n)}catch(s){console.error("Weather fetch error:",s);let e={temp:18,condition:"clear",icon:"☀️",location:"Toronto"};r(e),t(e)}finally{n(!1)}};return(0,i.useEffect)(()=>{o?d():(r(null),t(null))},[o]),(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"font-pixel text-pixel-sm text-kawaii-text font-bold",children:"\uD83C\uDF24️ Current Weather"}),(0,a.jsx)("button",{type:"button",onClick:()=>c(!o),className:"px-3 py-1 border-2 border-kawaii-border rounded font-pixel text-pixel-xs transition-colors pixel-ui ".concat(o?"bg-kawaii-accent":"bg-kawaii-surface"),style:{borderStyle:"outset"},children:o?"Disable":"Enable"})]}),o&&(0,a.jsx)("div",{className:"bg-kawaii-surface border-2 border-kawaii-border rounded-lg p-3 pixel-ui",style:{borderStyle:"inset"},children:l?(0,a.jsx)("p",{className:"font-pixel text-pixel-xs text-kawaii-text",children:"Getting weather..."}):s?(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("span",{className:"text-2xl",children:s.icon}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"font-pixel text-pixel-sm text-kawaii-text",children:[s.temp,"\xb0C - ",s.condition]}),(0,a.jsxs)("p",{className:"font-pixel text-pixel-xs text-kawaii-text/60",children:["\uD83D\uDCCD ",s.location]})]})]}),(0,a.jsx)("button",{type:"button",onClick:d,className:"px-2 py-1 bg-kawaii-background border border-kawaii-border rounded font-pixel text-pixel-xs hover:bg-kawaii-accent transition-colors pixel-ui",style:{borderStyle:"outset"},children:"Refresh"})]}):(0,a.jsx)("p",{className:"font-pixel text-pixel-xs text-kawaii-text/60",children:"Weather disabled"})})]})}let p={eat:"\uD83C\uDF73",sleep:"\uD83D\uDE34",study:"\uD83D\uDCDA",play:"\uD83C\uDFAE",life:"⭐"},g={eat:[{name:"Restaurant Review",title:"Amazing [Food] at [Restaurant]!",content:"Just tried [food/dish] at [restaurant name] and it was incredible! The [describe taste/texture] was perfect. Rating: ⭐⭐⭐⭐⭐\n\nLocation: [address]\nPrice: [price range]\nWould definitely come back!",hashtags:"#foodie #restaurant #delicious #yummy"},{name:"Home Cooking",title:"Homemade [Dish Name]",content:"Cooked [dish name] today! \uD83D\uDC68‍\uD83C\uDF73\n\nIngredients I used:\n- [ingredient 1]\n- [ingredient 2]\n- [ingredient 3]\n\nIt turned out [how it was]! Next time I'll try [what to improve].",hashtags:"#homecooking #recipe #cooking #kitchen"},{name:"Quick Snack",title:"[Snack/Drink] Break",content:"Having [snack/drink] right now. Perfect for [time of day/mood/situation]! \uD83D\uDE0B",hashtags:"#snack #break #treat #yummy"}],sleep:[{name:"Good Night",title:"Sleep Log",content:"Going to bed at [time]. Feeling [tired/energetic/peaceful]. Hope to get [X] hours of sleep tonight! \uD83D\uDE34",hashtags:"#goodnight #sleep #bedtime #rest"},{name:"Morning Report",title:"Sleep Log",content:"Slept for [X] hours last night. Woke up feeling [refreshed/tired/groggy]. Sleep quality: [rating/10] ⭐",hashtags:"#sleep #morning #rest #sleeplog"},{name:"Nap Time",title:"Sleep Log",content:"Taking a [X] minute nap. Needed some rest after [activity/reason]. \uD83D\uDCA4",hashtags:"#nap #rest #recharge #sleepy"}],study:[{name:"Learning Session",title:"Studying [Subject/Topic]",content:"Spent [X] hours studying [subject/topic] today. Learned about [key concepts]. \n\nProgress: [what you accomplished]\nNext: [what's next]\n\nFeeling [motivated/challenged/excited]! \uD83D\uDCDA",hashtags:"#study #learning #education #progress"},{name:"Course Update",title:"[Course Name] - Week [X]",content:"Week [X] of [course name] complete! \n\nThis week covered:\n- [topic 1]\n- [topic 2]\n- [topic 3]\n\nAssignment: [assignment details]\nDue: [date]",hashtags:"#course #online learning #progress #education"},{name:"Book Reading",title:"Reading: [Book Title]",content:"Currently reading '[book title]' by [author]. \n\nPage [X] of [total pages]\nChapter: [chapter name/number]\n\nThoughts so far: [your thoughts]",hashtags:"#reading #books #knowledge #learning"}],play:[{name:"Gaming Session",title:"Playing [Game Name]",content:"Just had an epic [X] hour gaming session with [game name]! \uD83C\uDFAE\n\nProgress: [what you achieved]\nLevel/Score: [level or score]\nBest moment: [highlight]\n\nNext goal: [what's next]",hashtags:"#gaming #videogames #fun #achievement"},{name:"Outdoor Activity",title:"[Activity] at [Location]",content:"Went [activity] at [location] today! The weather was [weather condition] and it was [how it felt].\n\nDuration: [time]\nWith: [who you went with]\nHighlight: [best part]",hashtags:"#outdoor #activity #fun #adventure"},{name:"Movie/Show",title:"Watched: [Title]",content:"Just finished watching '[title]' and wow! [your reaction]\n\nGenre: [genre]\nRating: [your rating]/10\nFavorite part: [what you liked]\n\nWould recommend to: [type of people]",hashtags:"#movie #tv #entertainment #review"}],life:[{name:"Daily Reflection",title:"Today's Thoughts",content:"Reflecting on today... [your thoughts]\n\nGrateful for: [what you're grateful for]\nLearned: [what you learned]\nTomorrow's goal: [what you want to do tomorrow]",hashtags:"#reflection #gratitude #life #thoughts"},{name:"Achievement",title:"Accomplished: [Achievement]",content:"So proud of myself for [achievement]! \uD83C\uDF89\n\nIt took [time/effort] but I finally [what you did]. \n\nHow I feel: [emotions]\nNext challenge: [what's next]",hashtags:"#achievement #proud #success #milestone"},{name:"Random Thoughts",title:"Random Musings",content:"Just thinking about [topic/subject]...\n\n[your thoughts and observations]\n\nLife is [your perspective]! ✨",hashtags:"#thoughts #life #random #musings"}]};function f(e){var t,s;let{category:n,onClose:o,editPost:c,isBlogOwner:d=!1}=e;if(!d)return(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-4 pointer-events-none",onClick:o,children:(0,a.jsxs)(r.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl max-w-md w-full p-6 pointer-events-auto text-center",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Access Denied"}),(0,a.jsx)("p",{className:"text-gray-600 mb-6",children:"Only the blog owner can create or edit posts."}),(0,a.jsx)("button",{onClick:o,className:"bg-gray-900 text-white px-4 py-2 rounded-lg hover:bg-gray-800 transition-colors",children:"Close"})]})});let[m,h]=(0,i.useState)(!1),[f,y]=(0,i.useState)({images:(null==c?void 0:c.image_urls)||[],videos:(null==c?void 0:c.video_urls)||[]}),[b,j]=(0,i.useState)(!1),[w,v]=(0,i.useState)(!c),[N,k]=(0,i.useState)(null),{register:C,handleSubmit:S,reset:_,setValue:L,watch:P}=(0,x.mN)({defaultValues:c?{title:c.title,content:c.content,hashtags:(null==(t=c.hashtags)?void 0:t.join(" "))||""}:{}}),M=e=>{"sleep"!==n&&L("title",e.title),L("content",e.content),L("hashtags",e.hashtags),v(!1)},D=async(e,t)=>{if(!e||0===e.length)return[];j(!0);let s=[];try{for(let a=0;a<e.length;a++){let i=e[a],r=i.name.split(".").pop(),n="".concat(Date.now(),"_").concat(Math.random().toString(36).substring(2),".").concat(r),o="".concat(t,"/").concat(n),{error:c}=await l.storage.from("posts").upload(o,i);if(c)throw c;let{data:{publicUrl:d}}=l.storage.from("posts").getPublicUrl(o);s.push(d)}return y(e=>({...e,[t]:[...e[t],...s]})),s}catch(e){return console.error("Error uploading files:",e),alert("Failed to upload ".concat(t,": ").concat(e)),[]}finally{j(!1)}},E=(e,t)=>{let s=e.target.files;s&&D(s,t)},W=(e,t)=>{y(s=>({...s,[t]:s[t].filter(t=>t!==e)}))},I=async e=>{h(!0);try{let{data:{user:t}}=await l.auth.getUser();if(!t)return void alert("You must be logged in to create posts");let s=e.hashtags?e.hashtags.split(" ").filter(e=>e.trim().length>0):[],a={category:n,title:e.title||("sleep"===n?"Sleep Log":"Untitled"),content:e.content,hashtags:s,image_urls:f.images,video_urls:f.videos,is_draft:!1,updated_at:new Date().toISOString(),weather:N,user_id:t.id};if(c){let{error:e}=await l.from("posts").update(a).eq("id",c.id);if(e)throw e;alert("Post updated successfully! ✨")}else{let{error:e}=await l.from("posts").insert(a);if(e)throw e;alert("Post created successfully! \uD83C\uDF89")}window.dispatchEvent(new Event("user-interaction")),_(),y({images:[],videos:[]}),o()}catch(e){console.error("Error ".concat(c?"updating":"creating"," post:"),e),alert("Failed to ".concat(c?"update":"create"," post: ").concat(e.message||"Unknown error"))}finally{h(!1)}};return(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-1 sm:p-4 pointer-events-none",onClick:o,children:(0,a.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white bg-opacity-90 backdrop-blur-sm rounded-2xl shadow-2xl max-w-2xl w-full max-h-[95vh] overflow-y-auto pointer-events-auto mx-1 sm:mx-4",onClick:e=>e.stopPropagation(),transition:{duration:.3,ease:"easeOut"},children:[(0,a.jsxs)("div",{className:"sticky top-0 z-10 bg-white bg-opacity-90 backdrop-blur-sm flex items-center justify-between p-3 sm:p-6 border-b border-gray-200 rounded-t-2xl",children:[(0,a.jsxs)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-lg",children:p[n]}),c?"Edit":"Create"," ",n.charAt(0).toUpperCase()+n.slice(1)," Post"]}),(0,a.jsx)("button",{onClick:o,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-500 hover:text-gray-700 transition-colors",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"p-4 sm:p-6",children:[w&&(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,a.jsx)("h3",{className:"font-pixel text-pixel-sm font-bold text-kawaii-text",children:"\uD83D\uDCDD Quick Templates"}),(0,a.jsx)("button",{type:"button",onClick:()=>v(!1),className:"font-pixel text-pixel-xs text-kawaii-text/60 hover:text-kawaii-text",children:"Skip templates"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 gap-2 max-h-60 overflow-y-auto",children:[null==(s=g[n])?void 0:s.map((e,t)=>(0,a.jsxs)("button",{type:"button",onClick:()=>M(e),className:"text-left p-3 bg-kawaii-surface border-2 border-kawaii-border rounded-lg pixel-ui hover:bg-kawaii-accent transition-colors",style:{borderStyle:"outset"},children:[(0,a.jsx)("div",{className:"font-pixel text-pixel-sm font-bold text-kawaii-text",children:e.name}),(0,a.jsxs)("div",{className:"font-pixel text-pixel-xs text-kawaii-text/70 mt-1",children:[e.content.substring(0,80),"..."]})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>v(!1),className:"text-center p-3 bg-kawaii-background border-2 border-kawaii-border rounded-lg pixel-ui hover:bg-kawaii-surface transition-colors",style:{borderStyle:"inset"},children:(0,a.jsx)("div",{className:"font-pixel text-pixel-sm text-kawaii-text",children:"✨ Start from scratch"})})]})]}),!w&&(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)("button",{type:"button",onClick:()=>v(!0),className:"font-pixel text-pixel-xs text-kawaii-text/60 hover:text-kawaii-text underline",children:"\uD83D\uDCDD Use a template instead"})}),(0,a.jsxs)("form",{onSubmit:S(I),className:"space-y-4",children:["sleep"!==n&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-kawaii-text mb-2 font-pixel font-bold text-pixel-sm",children:"Title:"}),(0,a.jsx)("input",{...C("title",{required:!0}),className:"w-full px-3 py-2 border-2 border-kawaii-border focus:outline-none font-pixel text-pixel-sm bg-white text-kawaii-text rounded-lg pixel-ui",placeholder:"What's happening?",style:{borderStyle:"inset"}})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-kawaii-text mb-2 font-pixel font-bold text-pixel-sm",children:"sleep"===n?"Sleep Log:":"Content:"}),(0,a.jsx)("textarea",{...C("content",{required:!0}),className:"w-full px-3 py-2 border-2 border-kawaii-border focus:outline-none resize-none font-pixel text-pixel-sm bg-white text-kawaii-text rounded-lg pixel-ui ".concat("sleep"===n?"h-20":"h-24"),placeholder:"sleep"===n?"How was your sleep? (e.g., 'Slept 8 hours, felt refreshed' or 'Tossed and turned all night')":"Share your thoughts...",style:{borderStyle:"inset"}})]}),"sleep"===n&&(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-kawaii-text/60 font-pixel text-pixel-xs mb-2",children:"Quick options:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1 sm:gap-2",children:["Slept well \uD83D\uDE34","8 hours of sleep","Couldn't sleep","Afternoon nap","Woke up refreshed","Restless night"].map(e=>(0,a.jsx)("button",{type:"button",onClick:()=>L("content",e),className:"px-1 sm:px-2 py-1 bg-kawaii-surface border border-kawaii-border rounded font-pixel text-pixel-xs hover:bg-kawaii-accent transition-colors pixel-ui text-xs",style:{borderStyle:"outset"},children:e},e))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-kawaii-text mb-2 font-pixel font-bold text-pixel-sm",children:"Hashtags:"}),(0,a.jsx)("input",{...C("hashtags"),className:"w-full px-3 py-2 border-2 border-kawaii-border focus:outline-none font-pixel text-pixel-sm bg-white text-kawaii-text rounded-lg pixel-ui",placeholder:"sleep"===n?"#sleep #goodnight #restful #tired":"#cute #kawaii #life",style:{borderStyle:"inset"}})]}),"sleep"!==n&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-kawaii-text mb-2 font-pixel font-bold text-pixel-sm",children:"Photos:"}),(0,a.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>E(e,"images"),className:"w-full px-3 py-2 border-2 border-kawaii-border focus:outline-none font-pixel text-pixel-sm bg-white text-kawaii-text rounded-lg pixel-ui",style:{borderStyle:"inset"},disabled:b}),f.images.length>0&&(0,a.jsx)("div",{className:"mt-2 grid grid-cols-2 sm:grid-cols-3 gap-2",children:f.images.map((e,t)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("img",{src:e,alt:"Upload ".concat(t+1),className:"w-full h-20 object-cover rounded border-2 border-kawaii-border"}),(0,a.jsx)("button",{type:"button",onClick:()=>W(e,"images"),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center hover:bg-red-600",children:"\xd7"})]},t))})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-kawaii-text mb-2 font-pixel font-bold text-pixel-sm",children:"Videos:"}),(0,a.jsx)("input",{type:"file",multiple:!0,accept:"video/*",onChange:e=>E(e,"videos"),className:"w-full px-3 py-2 border-2 border-kawaii-border focus:outline-none font-pixel text-pixel-sm bg-white text-kawaii-text rounded-lg pixel-ui",style:{borderStyle:"inset"},disabled:b}),f.videos.length>0&&(0,a.jsx)("div",{className:"mt-2 space-y-2",children:f.videos.map((e,t)=>(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("video",{src:e,className:"w-full h-32 object-cover rounded border-2 border-kawaii-border",controls:!0}),(0,a.jsx)("button",{type:"button",onClick:()=>W(e,"videos"),className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center hover:bg-red-600",children:"\xd7"})]},t))})]})]}),b&&(0,a.jsx)("div",{className:"text-center text-kawaii-text font-pixel text-pixel-sm",children:"Uploading files... \uD83D\uDCE4"}),(0,a.jsx)("div",{className:"pt-4 border-t-2 border-kawaii-border",children:(0,a.jsx)(u,{onWeatherUpdate:k})}),(0,a.jsxs)("div",{className:"flex gap-2 sm:gap-3 pt-4",children:[(0,a.jsx)(r.P.button,{type:"submit",disabled:m,className:"retro-button pixel-button flex-1 bg-green-300 hover:bg-green-400 disabled:opacity-50",whileHover:{y:-1},whileTap:{y:0},children:m?"Posting...":"Post"}),(0,a.jsx)(r.P.button,{type:"button",onClick:o,className:"retro-button pixel-button flex-1 bg-gray-200 hover:bg-gray-300",whileHover:{y:-1},whileTap:{y:0},children:"Cancel"})]})]})]})]})})}function y(e){let{postId:t,isExpanded:s}=e,[r,n]=(0,i.useState)([]),[o,c]=(0,i.useState)(""),[d,x]=(0,i.useState)(""),[m,h]=(0,i.useState)(!1),[u,p]=(0,i.useState)(!1);(0,i.useEffect)(()=>{if(s){g();let e=f();return()=>null==e?void 0:e()}},[t,s]);let g=async()=>{h(!0);try{let{data:e,error:s}=await l.from("comments").select("*").eq("post_id",t).order("created_at",{ascending:!0});if(s)throw s;n(e||[])}catch(e){console.error("Error fetching comments:",e)}finally{h(!1)}},f=()=>{let e=l.channel("comments:".concat(t)).on("postgres_changes",{event:"INSERT",schema:"public",table:"comments",filter:"post_id=eq.".concat(t)},e=>{n(t=>[...t,e.new])}).subscribe();return()=>{l.removeChannel(e)}},y=async e=>{if(e.preventDefault(),o.trim()){p(!0);try{let{data:{user:e}}=await l.auth.getUser(),s={post_id:t,content:o.trim(),author_name:e?"kawaii_blogger":d.trim()||"Anonymous",user_id:(null==e?void 0:e.id)||null};console.log("Submitting comment:",s);let{data:a,error:i}=await l.from("comments").insert(s).select();if(i)throw console.error("Supabase error:",i),i;console.log("Comment created:",a),c(""),x(""),g()}catch(e){console.error("Error posting comment:",e),alert("Failed to post comment: ".concat(e.message||"Unknown error"))}finally{p(!1)}}},b=e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4),i=Math.floor(s/36e5),r=Math.floor(s/864e5);return a<1?"just now":a<60?"".concat(a,"m ago"):i<24?"".concat(i,"h ago"):"".concat(r,"d ago")};return s?(0,a.jsxs)("div",{className:"mt-4 pt-4 border-t-2 border-green-200",children:[m?(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Loading comments..."}):(0,a.jsxs)("div",{className:"space-y-3 mb-4 max-h-48 overflow-y-auto",children:[r.map(e=>(0,a.jsx)("div",{className:"flex gap-2",children:(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"text-sm",children:[(0,a.jsx)("span",{className:"font-bold",children:e.author_name||"kawaii_blogger"})," ",e.content]}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:b(e.created_at)})]})},e.id)),0===r.length&&(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"No comments yet. Be the first!"})]}),(0,a.jsx)("form",{onSubmit:y,className:"space-y-2",children:(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Add a comment...",value:o,onChange:e=>c(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",disabled:u}),(0,a.jsx)("button",{type:"submit",disabled:u||!o.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Post"})]})})]}):null}let b={eat:(0,a.jsx)("svg",{className:"w-5 h-5 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),sleep:(0,a.jsx)("svg",{className:"w-5 h-5 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),study:(0,a.jsx)("svg",{className:"w-5 h-5 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),play:(0,a.jsx)("svg",{className:"w-5 h-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-4-6h4a2 2 0 012 2v4a2 2 0 01-2 2H9a2 2 0 01-2-2v-4a2 2 0 012-2z"})}),life:(0,a.jsx)("svg",{className:"w-5 h-5 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})})};function j(){let e=localStorage.getItem("kawaii_blog_session");return e||(e="anon_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9)),localStorage.setItem("kawaii_blog_session",e)),e}function w(e){let{post:t,category:s,onEditPost:n,onDeletePost:o,isBlogOwner:c}=e,[d,x]=(0,i.useState)(!1),[m,h]=(0,i.useState)(0),[u,p]=(0,i.useState)(0),[g,f]=(0,i.useState)(!1),[w,v]=(0,i.useState)(!1);(0,i.useEffect)(()=>{(async()=>{let{count:e}=await l.from("comments").select("*",{count:"exact",head:!0}).eq("post_id",t.id);h(e||0);let{count:s}=await l.from("likes").select("*",{count:"exact",head:!0}).eq("post_id",t.id);p(s||0);let{data:{user:a}}=await l.auth.getUser();if(a){let{data:e}=await l.from("likes").select("id").eq("post_id",t.id).eq("user_id",a.id).single();f(!!e)}else{let e=j(),{data:s}=await l.from("likes").select("id").eq("post_id",t.id).eq("user_identifier",e).single();f(!!s)}})()},[t.id]);let N=t.username||"kawaii_blogger",k=async()=>{if(!w){v(!0);try{let{data:{user:e}}=await l.auth.getUser();if(g){if(e)await l.from("likes").delete().eq("post_id",t.id).eq("user_id",e.id);else{let e=j();await l.from("likes").delete().eq("post_id",t.id).eq("user_identifier",e)}p(e=>Math.max(0,e-1)),f(!1)}else{let s={post_id:t.id,user_id:(null==e?void 0:e.id)||null,user_identifier:e?null:j()};await l.from("likes").insert(s),p(e=>e+1),f(!0)}}catch(e){console.error("Error toggling like:",e)}finally{v(!1)}}};return(0,a.jsxs)(r.P.div,{className:"bg-white border border-gray-200 rounded-2xl overflow-hidden shadow-sm",style:{maxWidth:"468px",width:"100%"},initial:{opacity:0,y:20},animate:{opacity:1,y:0},whileHover:{y:-2},transition:{duration:.2},children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 p-3 sm:p-4",children:[(0,a.jsx)("div",{className:"w-8 sm:w-10 h-8 sm:h-10 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-semibold text-xs sm:text-sm",children:N.charAt(0).toUpperCase()})}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:N}),(0,a.jsx)("div",{className:"flex items-center gap-1 mt-0.5",children:"sleep"!==s&&(0,a.jsx)("span",{className:"text-xs text-gray-500",children:t.title})})]})]}),t.weather&&(0,a.jsx)("div",{className:"px-3 sm:px-4 mb-3",children:(0,a.jsxs)("div",{className:"bg-gray-50 px-3 py-2 rounded-xl inline-flex items-center gap-2",children:[(0,a.jsx)("span",{className:"text-sm",children:t.weather.icon}),(0,a.jsxs)("span",{className:"text-xs text-gray-600 font-medium",children:[t.weather.temp,"\xb0C in ",t.weather.location]})]})}),"sleep"!==s&&(0,a.jsx)("div",{className:"relative bg-gray-50 flex items-center justify-center",style:{height:"300px"},children:t.image_urls&&t.image_urls.length>0?(0,a.jsx)("img",{src:t.image_urls[0],alt:"Post",className:"w-full h-full object-cover"}):(0,a.jsxs)("div",{className:"p-6 text-center w-full h-full flex flex-col items-center justify-center bg-gray-100",children:[(0,a.jsx)(r.P.div,{className:"mb-4 flex items-center justify-center",animate:{scale:[1,1.1,1],rotate:[0,5,-5,0]},transition:{duration:3,repeat:1/0,ease:"easeInOut"},children:(0,a.jsx)("div",{className:"w-16 h-16 flex items-center justify-center",children:i.cloneElement(b[s],{className:"w-12 h-12"})})}),(0,a.jsxs)("p",{className:"text-sm px-4 text-gray-700 bg-white rounded-xl p-4 shadow-sm max-w-xs",children:[t.content.substring(0,100),"..."]})]})}),"sleep"===s&&(0,a.jsxs)("div",{className:"mb-3 mx-3 sm:mx-4 flex items-center gap-3 bg-gray-50 px-3 sm:px-4 py-2 sm:py-3 rounded-xl",children:[(0,a.jsx)(r.P.div,{className:"flex items-center justify-center",animate:{rotate:[-10,10,-10]},transition:{duration:4,repeat:1/0,ease:"easeInOut"},children:(0,a.jsx)("div",{className:"w-8 h-8 flex items-center justify-center",children:i.cloneElement(b[s],{className:"w-6 h-6"})})}),(0,a.jsx)("div",{className:"text-gray-500 text-xs",children:new Date(t.created_at).toLocaleDateString()})]}),(0,a.jsxs)("div",{className:"flex items-center gap-3 sm:gap-4 px-3 sm:px-4 py-2 sm:py-3",children:[(0,a.jsx)(r.P.button,{onClick:k,disabled:w,className:"transition-transform",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:g?"#ef4444":"none",stroke:g?"#ef4444":"#374151",strokeWidth:"2",className:"cursor-pointer transition-colors hover:stroke-red-500",children:(0,a.jsx)("path",{d:"M20.84 4.61a5.5 5.5 0 0 0-7.78 0L12 5.67l-1.06-1.06a5.5 5.5 0 0 0-7.78 7.78l1.06 1.06L12 21.23l7.78-7.78 1.06-1.06a5.5 5.5 0 0 0 0-7.78z"})})}),(0,a.jsx)(r.P.button,{whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)("svg",{className:"w-6 h-6 text-gray-700 hover:text-blue-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),c&&(0,a.jsx)(r.P.button,{onClick:()=>null==n?void 0:n(t),className:"transition-colors",title:"Edit post",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsxs)("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"cursor-pointer text-gray-500 hover:text-gray-700",children:[(0,a.jsx)("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),(0,a.jsx)("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"})]})}),c&&(0,a.jsx)(r.P.button,{onClick:()=>null==o?void 0:o(t),className:"transition-colors",title:"Delete post",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsxs)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",className:"cursor-pointer text-red-500 hover:text-red-700",children:[(0,a.jsx)("polyline",{points:"3,6 5,6 21,6"}),(0,a.jsx)("path",{d:"M19,6V20a2,2 0 0,1-2,2H7a2,2 0 0,1-2-2V6M8,6V4a2,2 0 0,1,2-2h4a2,2 0 0,1,2,2V6"}),(0,a.jsx)("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),(0,a.jsx)("line",{x1:"14",y1:"11",x2:"14",y2:"17"})]})}),(0,a.jsx)(r.P.button,{className:"ml-auto",whileHover:{scale:1.1},whileTap:{scale:.9},children:(0,a.jsx)("svg",{className:"w-6 h-6 text-gray-700 hover:text-green-500 transition-colors",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"})})})]}),(0,a.jsx)("p",{className:"font-semibold text-gray-900 text-sm px-3 sm:px-4 mb-2",children:u>=1e3?"".concat((u/1e3).toFixed(1),"k likes"):"".concat(u," likes")}),(0,a.jsx)("div",{className:"mb-3 px-3 sm:px-4",children:"sleep"===s?(0,a.jsx)("p",{className:"text-sm text-gray-900 leading-relaxed",children:t.content}):(0,a.jsxs)("p",{className:"text-sm text-gray-900 leading-relaxed",children:[(0,a.jsx)("span",{className:"font-semibold",children:N})," ",t.content]})}),(0,a.jsxs)("p",{className:"text-sm text-gray-500 mb-3 cursor-pointer hover:text-gray-700 transition-colors px-3 sm:px-4",onClick:()=>x(!d),children:[d?"Hide":"View"," ",m," comments"]}),t.hashtags&&t.hashtags.length>0&&(0,a.jsx)("div",{className:"mb-3 px-3 sm:px-4",children:t.hashtags.map((e,t)=>(0,a.jsxs)("span",{className:"text-xs text-blue-500 mr-2 hover:text-blue-600 cursor-pointer transition-colors font-medium",children:["#",e]},t))}),!d&&(0,a.jsxs)("div",{className:"flex items-center gap-2 sm:gap-3 px-3 sm:px-4 py-2 sm:py-3 border-t border-gray-100 cursor-pointer",onClick:()=>x(!0),children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white font-semibold text-xs",children:N.charAt(0).toUpperCase()})}),(0,a.jsx)("span",{className:"flex-1 text-sm text-gray-500 hover:text-gray-700 transition-colors",children:"Add a comment..."})]}),(0,a.jsx)(y,{postId:t.id,isExpanded:d})]})}function v(e){let{category:t,onClose:s,onEditPost:n,onDeletePost:o,isBlogOwner:c}=e,[d,x]=(0,i.useState)([]),[m,h]=(0,i.useState)(!0);(0,i.useEffect)(()=>{u()},[t]);let u=async()=>{try{console.log("Fetching posts for category:",t);let{data:e,error:s}=await l.from("posts").select("*").eq("category",t).eq("is_draft",!1).order("created_at",{ascending:!1});if(console.log("Posts query result:",{posts:e,error:s}),s)throw s;if(!e||0===e.length){console.log("No posts found for category:",t),x([]);return}let a=await Promise.all(e.map(async e=>{if(!e.user_id)return{...e,username:"Blog Owner"};{let{data:t}=await l.from("profiles").select("username").eq("id",e.user_id).single();return{...e,username:(null==t?void 0:t.username)||"Blog Owner"}}}));x(a)}catch(e){console.error("Error fetching posts:",e)}finally{h(!1)}};return(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 z-50 flex items-center justify-center p-1 sm:p-4 pointer-events-none",onClick:s,children:(0,a.jsxs)(r.P.div,{initial:{scale:.9,opacity:0,y:20},animate:{scale:1,opacity:1,y:0},exit:{scale:.9,opacity:0,y:20},className:"bg-white bg-opacity-90 rounded-2xl shadow-2xl max-w-lg w-full max-h-[95vh] overflow-y-auto pointer-events-auto mx-1 sm:mx-4",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"sticky top-0 z-10 bg-white bg-opacity-90 backdrop-blur-sm flex items-center justify-between p-3 sm:p-4 border-b border-gray-200 rounded-t-2xl",children:[(0,a.jsxs)("h2",{className:"text-lg sm:text-xl font-semibold text-gray-900 flex items-center gap-2",children:[(0,a.jsx)("span",{className:"inline-flex items-center",children:b[t]}),t.charAt(0).toUpperCase()+t.slice(1)," Posts"]}),(0,a.jsx)("button",{onClick:s,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-500 hover:text-gray-700 transition-colors",children:"\xd7"})]}),(0,a.jsx)("div",{className:"p-2 sm:p-3",children:m?(0,a.jsx)("p",{className:"text-center text-gray-500 text-sm",children:"Loading posts..."}):d.length>0?(0,a.jsx)("div",{className:"space-y-6 flex flex-col items-center",children:d.map(e=>(0,a.jsx)(w,{post:e,category:t,onEditPost:n,onDeletePost:o,isBlogOwner:c},e.id))}):(0,a.jsx)("p",{className:"text-center text-gray-500 text-sm bg-gray-50 p-6 rounded-xl",children:"No posts in this category yet."})})]})})}function N(e){let{isOpen:t,post:s,onConfirm:i,onCancel:l}=e;return t?(0,a.jsx)(r.P.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:l,children:(0,a.jsxs)(r.P.div,{initial:{scale:.9,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.9,opacity:0},className:"bg-white rounded-2xl shadow-2xl p-0 max-w-md w-full",onClick:e=>e.stopPropagation(),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:"\uD83D\uDDD1️ Delete Post"}),(0,a.jsx)("button",{onClick:l,className:"w-8 h-8 bg-gray-100 hover:bg-gray-200 rounded-full flex items-center justify-center text-gray-500 hover:text-gray-700 transition-colors",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900 mb-3",children:"Are you sure you want to delete this post?"}),(0,a.jsxs)("div",{className:"bg-gray-50 border border-gray-200 p-3 rounded-lg",children:[(0,a.jsx)("p",{className:"text-sm font-bold text-gray-900",children:(null==s?void 0:s.title)||"Sleep Log"}),(0,a.jsxs)("p",{className:"text-xs text-gray-600 mt-1",children:[null==s?void 0:s.content.substring(0,100),"..."]})]})]}),(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 p-3 rounded-lg mb-4",children:(0,a.jsx)("p",{className:"text-xs text-red-700",children:"⚠️ This action cannot be undone. All comments and likes will also be deleted."})}),(0,a.jsxs)("div",{className:"flex gap-3",children:[(0,a.jsx)("button",{onClick:l,className:"flex-1 px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:i,className:"flex-1 px-4 py-2 bg-red-600 rounded-lg text-sm font-medium text-white hover:bg-red-700 transition-colors",children:"Delete"})]})]})]})}):null}function k(e){let{spotifyId:t,type:s="track"}=e;if(!t)return null;let i="https://open.spotify.com/embed/".concat(s,"/").concat(t,"?utm_source=generator&theme=0");return(0,a.jsx)("div",{className:"w-full",children:(0,a.jsx)("iframe",{src:i,width:"100%",height:"track"===s?80:200,frameBorder:"0",allowFullScreen:!0,allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"rounded-lg"})})}function C(){let[e,t]=(0,i.useState)(null),[s,r]=(0,i.useState)(""),[n,o]=(0,i.useState)(!1),[c,d]=(0,i.useState)(!1),[x,m]=(0,i.useState)(""),[h,u]=(0,i.useState)(!1);(0,i.useEffect)(()=>{p(),g(),f()},[]);let p=async()=>{let{data:{user:e}}=await l.auth.getUser();if(e){let{data:t}=await l.from("profiles").select("is_blog_owner").eq("id",e.id).single();u((null==t?void 0:t.is_blog_owner)||!1)}},g=async()=>{let{data:e,error:s}=await l.from("now_playing").select("*").single();e&&!s&&t(e)},f=()=>{let e=l.channel("now_playing_updates").on("postgres_changes",{event:"*",schema:"public",table:"now_playing"},()=>{g()}).subscribe();return()=>{l.removeChannel(e)}},y=async()=>{if(m(""),!s)return void m("Please enter a Spotify URL");let e=function(e){try{let t=new URL(e),s=t.pathname.split("/").filter(e=>e.length>0);if("open.spotify.com"===t.hostname){let e=-1,t=null;for(let a=0;a<s.length;a++)if(["track","playlist","album"].includes(s[a])){t=s[a],e=a;break}if(t&&e>=0&&s[e+1]){let a=s[e+1].split("?")[0];if(a)return{id:a,type:t}}}}catch(e){}return null}(s);if(!e)return void m("Please enter a valid Spotify link");d(!0);try{let t,{data:{user:a}}=await l.auth.getUser();if(!a)return void m("You must be logged in to update");let i={user_id:a.id,spotify_id:e.id,spotify_type:e.type,title:"Spotify ".concat(e.type),embed_url:"https://open.spotify.com/embed/".concat(e.type,"/").concat(e.id),updated_at:new Date().toISOString()};try{let e=await fetch("https://open.spotify.com/oembed?url=".concat(encodeURIComponent(s)));if(e.ok){let t=await e.json();if(t.title){let e=t.title.split(" \xb7 ");e.length>=2?Object.assign(i,{title:e[0],artist:e.slice(1).join(" \xb7 ")}):Object.assign(i,{title:t.title})}}}catch(e){}let{data:n}=await l.from("now_playing").select("id").eq("user_id",a.id).single();if(n){let{error:e}=await l.from("now_playing").update(i).eq("user_id",a.id);t=e}else{let{error:e}=await l.from("now_playing").insert(i);t=e}if(t)throw console.error("Supabase error:",t),t;r(""),o(!1),g()}catch(e){console.error("Error updating now playing:",e),m("Failed to update: ".concat(e.message||e))}finally{d(!1)}};return(0,a.jsx)("div",{children:(0,a.jsx)("div",{className:"",children:!e||n?(0,a.jsx)("div",{children:h?(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("div",{className:"w-5 h-5 bg-green-500 rounded-full flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:"S"})}),(0,a.jsx)("span",{className:"text-xs text-gray-700",children:"Share from Spotify"})]}),(0,a.jsx)("input",{type:"text",placeholder:"Paste Spotify link (song, playlist, or album)...",value:s,onChange:e=>{r(e.target.value),m("")},className:"w-full px-2 py-2 border border-gray-300 rounded text-xs bg-white focus:outline-none focus:ring-1 focus:ring-green-500 transition-all"}),x&&(0,a.jsx)("p",{className:"text-xs text-red-600",children:x}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsx)("button",{onClick:y,disabled:c,className:"px-3 py-1 bg-green-500 text-white rounded text-xs font-medium hover:bg-green-600 transition-colors disabled:opacity-50",children:c?"Updating...":"Update"}),e&&(0,a.jsx)("button",{onClick:()=>o(!1),className:"px-3 py-1 bg-white text-gray-700 border border-gray-300 rounded text-xs font-medium hover:bg-gray-50 transition-colors",children:"Cancel"})]})]}):(0,a.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"Nothing playing right now"})}):(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-green-500 rounded-full flex items-center justify-center animate-pulse",children:(0,a.jsx)("span",{className:"text-white text-xs font-bold",children:"S"})}),(0,a.jsxs)("div",{children:[e.title&&e.artist?(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-xs font-medium text-gray-900",children:e.title}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:e.artist})]}):(0,a.jsxs)("p",{className:"text-xs font-medium text-gray-900",children:["Spotify ",e.spotify_type]}),(0,a.jsx)("p",{className:"text-xs text-gray-500",children:(e=>{let t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/6e4),i=Math.floor(s/36e5),r=Math.floor(s/864e5);return a<1?"just now":a<60?"".concat(a,"m ago"):i<24?"".concat(i,"h ago"):"".concat(r,"d ago")})(e.updated_at)})]})]}),h&&(0,a.jsx)("button",{onClick:()=>o(!0),className:"px-2 py-1 bg-gray-100 border border-gray-300 rounded text-xs font-medium hover:bg-gray-200 transition-colors",children:"Change"})]}),(0,a.jsx)(k,{spotifyId:e.spotify_id,type:e.spotify_type}),(0,a.jsxs)("a",{href:"https://open.spotify.com/".concat(e.spotify_type,"/").concat(e.spotify_id),target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-1 text-xs text-gray-500 hover:text-gray-700 transition-colors",children:["Open in Spotify",(0,a.jsxs)("svg",{width:"8",height:"8",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[(0,a.jsx)("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),(0,a.jsx)("polyline",{points:"15 3 21 3 21 9"}),(0,a.jsx)("line",{x1:"10",y1:"14",x2:"21",y2:"3"})]})]})]})})})}function S(){let[e,t]=(0,i.useState)(null),[s,r]=(0,i.useState)(!1),[n,c]=(0,i.useState)(!1),[x,m]=(0,i.useState)(null),[h,u]=(0,i.useState)(!1),[p,g]=(0,i.useState)(null),[y,b]=(0,i.useState)(!1),j=e=>{console.log("Category clicked:",e),t(e),c(!0)},w=e=>{console.log("Create post clicked:",e),t(e),m(null),r(!0)},k=async()=>{if(p)try{let{error:e}=await l.from("posts").delete().eq("id",p.id);if(e)throw e;alert("Post deleted successfully! \uD83D\uDDD1️"),u(!1),g(null),window.location.reload()}catch(e){console.error("Error deleting post:",e),alert("Failed to delete post: ".concat(e.message||"Unknown error"))}};return(0,i.useEffect)(()=>{let e=async()=>{try{let{data:{user:e}}=await l.auth.getUser();if(e){let{data:t}=await l.from("profiles").select("is_blog_owner").eq("id",e.id).single();b((null==t?void 0:t.is_blog_owner)||!1)}else b(!1)}catch(e){console.error("Error checking blog owner status:",e),b(!1)}};e();let{data:{subscription:t}}=l.auth.onAuthStateChange(()=>{e()});return()=>t.unsubscribe()},[]),(0,a.jsx)("main",{className:"min-h-screen bg-gray-50 p-0",children:(0,a.jsxs)("div",{className:"min-h-screen flex flex-col relative",children:[(0,a.jsxs)("div",{className:"flex-1 flex flex-col bg-white",children:[(0,a.jsx)(d,{}),(0,a.jsx)("header",{className:"bg-gradient-to-r from-blue-50 to-purple-50 px-4 sm:px-6 py-5 sm:py-6 border-b border-gray-200 shadow-sm",children:(0,a.jsx)("h1",{className:"text-2xl sm:text-3xl md:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-blue-600 to-purple-600 text-center font-[var(--font-poppins)] tracking-tight",children:"Daily Check-In"})}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col lg:grid lg:grid-cols-4 min-h-0",children:[(0,a.jsx)("div",{className:"hidden lg:block lg:col-span-1 lg:border-r border-gray-200 bg-white",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-sm font-medium text-gray-900 mb-2 tracking-tight",children:"About"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed",children:"Hi! Stop checking on me directly, just look at this. How easy right?"})]})}),(0,a.jsxs)("div",{className:"flex-1 lg:flex-initial lg:col-span-2 lg:border-r border-b lg:border-b-0 border-gray-200 bg-gray-50 order-2 lg:order-1",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 bg-white px-4 py-2",children:(0,a.jsx)("h2",{className:"text-sm font-medium text-gray-900 tracking-tight",children:"Activities"})}),(0,a.jsx)("div",{className:"p-4 sm:p-6 grid grid-cols-2 sm:grid-cols-2 md:grid-cols-2 gap-3 sm:gap-4",children:[{category:"eat",icon:(0,a.jsx)("svg",{className:"w-8 h-8 text-orange-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Eat"},{category:"sleep",icon:(0,a.jsx)("svg",{className:"w-8 h-8 text-indigo-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20.354 15.354A9 9 0 018.646 3.646 9.003 9.003 0 0012 21a9.003 9.003 0 008.354-5.646z"})}),label:"Sleep"},{category:"study",icon:(0,a.jsx)("svg",{className:"w-8 h-8 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.746 0 3.332.477 4.5 1.253v13C19.832 18.477 18.246 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"})}),label:"Study"},{category:"play",icon:(0,a.jsx)("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14.828 14.828a4 4 0 01-5.656 0M9 10h1m4 0h1m-6 4h8m-4-6h4a2 2 0 012 2v4a2 2 0 01-2 2H9a2 2 0 01-2-2v-4a2 2 0 012-2z"})}),label:"Play"},{category:"life",icon:(0,a.jsx)("svg",{className:"w-8 h-8 text-purple-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})}),label:"Life"}].map(e=>{let{category:t,icon:s,label:i}=e;return(0,a.jsx)("div",{className:"bg-white rounded-xl sm:rounded-2xl p-4 sm:p-6 shadow-md sm:shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 cursor-pointer group",onClick:()=>j(t),children:(0,a.jsxs)("div",{className:"flex flex-col items-center space-y-2 sm:space-y-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl sm:rounded-2xl group-hover:scale-110 transition-transform duration-300 shadow-inner",children:(0,a.jsx)("div",{className:"transform scale-75 sm:scale-100",children:s})}),(0,a.jsx)("span",{className:"text-sm sm:text-base font-semibold text-gray-900",children:i}),y&&(0,a.jsxs)("button",{onClick:e=>{e.stopPropagation(),w(t)},className:"mt-1 sm:mt-2 opacity-0 group-hover:opacity-100 transition-all duration-300 bg-gradient-to-r from-gray-800 to-gray-900 text-white px-3 py-1.5 sm:px-4 sm:py-2 rounded-full text-xs font-medium hover:from-gray-900 hover:to-black shadow-md",children:[(0,a.jsx)("span",{className:"hidden sm:inline",children:"Create New"}),(0,a.jsx)("span",{className:"sm:hidden",children:"New"})]})]})},t)})})]}),(0,a.jsxs)("div",{className:"lg:col-span-1 bg-white flex flex-col h-auto lg:h-full order-1 lg:order-2",children:[(0,a.jsx)("div",{className:"lg:hidden border-b border-gray-200",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-sm font-medium text-gray-900 mb-2 tracking-tight",children:"About"}),(0,a.jsx)("p",{className:"text-xs text-gray-600 leading-relaxed",children:"Hi! Stop checking on me directly, just look at this. How easy right?"})]})}),(0,a.jsxs)("div",{className:"border-b border-gray-200",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-2",children:(0,a.jsx)("h2",{className:"text-sm font-medium text-gray-900 tracking-tight",children:"Now Playing"})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)(C,{})})]}),(0,a.jsxs)("div",{className:"flex-1 flex flex-col min-h-0",children:[(0,a.jsx)("div",{className:"border-b border-gray-200 bg-gray-50 px-4 py-2 flex-shrink-0",children:(0,a.jsx)("h2",{className:"text-sm font-medium text-gray-900 tracking-tight",children:"Recent Activity"})}),(0,a.jsx)("div",{className:"flex-1 overflow-y-auto min-h-[200px] lg:min-h-[300px]",children:(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)(o,{onCategoryClick:j}),(0,a.jsx)("div",{className:"h-6"})]})})]})]})]})]}),s&&e&&(0,a.jsx)(f,{category:e,editPost:x,isBlogOwner:y,onClose:()=>{r(!1),t(null),m(null)}}),n&&e&&(0,a.jsx)(v,{category:e,onEditPost:e=>{t(e.category),m(e),r(!0),c(!1)},onDeletePost:e=>{g(e),u(!0)},isBlogOwner:y,onClose:()=>{c(!1),t(null)}}),(0,a.jsx)(N,{isOpen:h,post:p,onConfirm:k,onCancel:()=>{u(!1),g(null)}})]})})}},9129:(e,t,s)=>{Promise.resolve().then(s.bind(s,345))}},e=>{var t=t=>e(e.s=t);e.O(0,[871,441,684,358],()=>t(9129)),_N_E=e.O()}]);